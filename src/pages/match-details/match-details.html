<ion-header>

  <ion-navbar [color]="'primary'">
    <ion-title>{{ match.date | date:'shortDate' }}</ion-title>
  </ion-navbar>

  <ion-toolbar no-border-top>
    <ion-segment [(ngModel)]="segment">
      <ion-segment-button value="details">
        Details
      </ion-segment-button>
      <ion-segment-button value="map">
        Replay
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div [ngSwitch]="segment">
    <ng-container *ngSwitchCase="'details'">
      <div class="item-profile"
           [ngClass]="match.map === 'Desert_Main' ? 'miramar' : 'erangel'">
      </div>
      <div class="item-detail"
           padding>
        <h2>Rank #{{ match.team.stats.rank }}</h2>
        <mat-accordion>
          <mat-expansion-panel *ngFor="let teammate of match.team.teammates; let first = first"
                               [expanded]="first"
                               hideToggle="true">
            <mat-expansion-panel-header>
              <mat-panel-title>
                {{ teammate.stats.name }}
              </mat-panel-title>
            </mat-expansion-panel-header>
            <mat-list>
              <mat-list-item>
                <h3 matLine> Kills </h3>
                <h3 matLine>
                  {{ teammate.stats.kills }}
                </h3>
              </mat-list-item>
              <mat-list-item>
                <h3 matLine> Damage Dealt </h3>
                <h3 matLine>
                  {{ teammate.stats.damageDealt | number : '1.0-2' }}
                </h3>
              </mat-list-item>
              <mat-list-item>
                <h3 matLine> Headshot Kills </h3>
                <h3 matLine>
                  {{ teammate.stats.headshotKills }}
                </h3>
              </mat-list-item>
              <mat-accordion *ngIf="telemetry">
                <mat-expansion-panel *ngFor="let telem of telemetry[teammate.stats.name]; let first = first"
                                     [expanded]="first"
                                     hideToggle="true">
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      {{ telem[0].damageCauserName | damageTypePipe }}
                    </mat-panel-title>
                  </mat-expansion-panel-header>
                  <mat-list *ngFor="let attack of telem">
                    <mat-list-item (click)="drawAttack(attack)">
                      <h3 matLine> {{ attack.damage | number : '1.0-2' }} </h3>
                      <h3 matLine> {{ attack.damageReason }} </h3>
                      <h3 matLine> {{ attack.victim.name }} </h3>
                    </mat-list-item>
                  </mat-list>
                </mat-expansion-panel>
              </mat-accordion>
            </mat-list>
          </mat-expansion-panel>
        </mat-accordion>
      </div>
    </ng-container>

    <ng-container *ngSwitchCase="'map'">
      <zoom-area>
        <img [src]="mapName">
      </zoom-area>
    </ng-container>
  </div>
</ion-content>
